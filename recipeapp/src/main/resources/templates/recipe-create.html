<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <title>New Recipe</title>
</head>
<body>
<div class="container">

    <div class="nav">
        <div class="brand">
            <h1>RecipeApp</h1>
            <small>Create your own recipes</small>
        </div>
        <div class="links">
            <a th:href="@{/fridge}">Fridge</a>
            <a th:href="@{/recipes/new}">New Recipe</a>
        </div>
    </div>

    <div class="card">
        <h2>New Recipe</h2>

        <form th:object="${recipe}" method="post">

            <div style="margin-bottom:12px;">
                <label>Title</label>
                <input type="text" th:field="*{title}" placeholder="e.g. Pancakes">
            </div>

            <div style="margin-bottom:16px;">
                <label>Description</label>
                <textarea th:field="*{description}" placeholder="Short instructions..."></textarea>
            </div>

            <h3>Ingredients</h3>

            <div th:each="ing, stat : *{ingredients}">
                <div class="form-row">
                    <div>
                        <label>Name</label>
                        <input type="text"
                               th:field="*{ingredients[__${stat.index}__].name}"
                               placeholder="e.g. egg">
                    </div>

                    <div>
                        <label>Quantity</label>
                        <input type="number"
                               step="0.01"
                               th:field="*{ingredients[__${stat.index}__].quantity}"
                               placeholder="e.g. 2">
                    </div>

                    <div>
                        <label>Unit</label>
                        <select th:field="*{ingredients[__${stat.index}__].unit}">
                            <option th:each="u : ${units}"
                                    th:value="${u}"
                                    th:text="${u}">
                            </option>
                        </select>
                    </div>
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-top:16px;">
                <button class="btn"
                        type="submit"
                        th:formaction="@{/recipes}">
                    Save
                </button>

                <button class="btn secondary"
                        type="submit"
                        th:formaction="@{/recipes/add-ingredient}">
                    + Ingredient
                </button>

                <a class="btn secondary"
                   th:href="@{/fridge}">
                    Back
                </a>
            </div>

        </form>
    </div>

</div>
</body>
</html>
